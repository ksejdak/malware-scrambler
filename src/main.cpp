#include "Utils\ArgsParser\ArgsParser.h"
#include "MalwareScrambler.h"

#include <iostream>
#include <exception>

int main(int argc, char *argv[])
{
    try
    {
        ArgsParser argsParser;
        argsParser.parse(argc, argv);

        MainOptions mainOptions = argsParser.getMainOptions();

        MalwareScrambler malwareScrambler(mainOptions.inputPath, mainOptions.outputPath, mainOptions.configPath);
        malwareScrambler.run();
    }
    catch(const std::exception& e)
    {
        std::cout << "[ERROR] " << e.what() << std::endl;
        return 1;
    }

    return 0;
}